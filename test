local OrionLib = loadstring(game:HttpGet("https://raw.githubusercontent.com/Khanhdzaii/orionlib/refs/heads/main/orionlib"))()

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local Player = Players.LocalPlayer
local HttpService = game:GetService("HttpService")
local RunService = game:GetService("RunService")

getgenv().AutoSummon = false
getgenv().AutoRandom = false
getgenv().AutoStore = false
getgenv().NoDelay = false

local DelayTime = 1

-- ========== CODE GIAO DI·ªÜN (H√åNH N·ªÄN, M√ÄU S·∫ÆC) ==========
local hubColorFile = "HubColor.json"
local textAndBorderColorFile = "TextAndBorderColor.json"
local savedHubColor = nil
local savedTextAndBorderColor = nil

-- H√†m l∆∞u m√†u v√†o file
local function saveColor(color, path)
    local colorData = { r = color.R, g = color.G, b = color.B }
    local jsonData = HttpService:JSONEncode(colorData)
    writefile(path, jsonData)
end

-- H√†m t·∫£i m√†u t·ª´ file
local function loadColor(path, defaultColor)
    if isfile(path) then
        local jsonData = readfile(path)
        local colorData = HttpService:JSONDecode(jsonData)
        return Color3.new(colorData.r, colorData.g, colorData.b)
    else
        return defaultColor
    end
end

-- H√†m √°p d·ª•ng m√†u n·ªÅn cho Hub
local function applyHubColor(hubColor)
    if gethui():FindFirstChild("Orion") then
        for _, i in pairs(gethui():GetChildren()) do
            if i.Name == "Orion" then
                for _, v in pairs(i:GetDescendants()) do
                    if v.ClassName == "Frame" and v.BackgroundTransparency < 0.99 then
                        v.BackgroundColor3 = hubColor
                    end
                end
            end
        end
    end
end

-- H√†m √°p d·ª•ng m√†u vi·ªÅn v√† ch·ªØ
local function applyTextAndBorderColor(color)
    if gethui():FindFirstChild("Orion") then
        for _, i in pairs(gethui():GetChildren()) do
            if i.Name == "Orion" then
                for _, v in pairs(i:GetDescendants()) do
                    if v.ClassName == "Frame" then
                        v.BorderColor3 = color
                    end
                    if v:IsA("TextLabel") or v:IsA("TextButton") or v:IsA("TextBox") then
                        v.TextColor3 = color
                    end
                end
            end
        end
    end
end

-- H√†m √°p d·ª•ng ƒë·ªô trong su·ªët c·ªßa Hub
local function applyHubTransparency(transparency)
    if gethui():FindFirstChild("Orion") then
        for _, gui in pairs(gethui():GetChildren()) do
            if gui.Name == "Orion" then
                for _, frame in pairs(gui:GetDescendants()) do
                    if frame:IsA("Frame") and frame.BackgroundTransparency < 0.99 then
                        frame.BackgroundTransparency = transparency
                    end
                end
            end
        end
    end
end

-- ========== ID H√åNH N·ªÄN (C≈® + M·ªöI) ==========
local BackgroundImages = {
    -- ID c≈© (3 ·∫£nh ƒë·∫ßu)
    "79464702411655",  -- ·∫¢nh 1
    "78188111267182",  -- ·∫¢nh 2
    "87324819549778",  -- ·∫¢nh 3
    
    -- ID m·ªõi th√™m (4 ·∫£nh)
    "106183662263394", -- ·∫¢nh 4 (m·ªõi)
    "101124835052371", -- ·∫¢nh 5 (m·ªõi)
    "104282201865978", -- ·∫¢nh 6 (m·ªõi)
    "109827889408368"  -- ·∫¢nh 7 (m·ªõi)
}

-- H√†m ch·ªçn ng·∫´u nhi√™n ID h√¨nh n·ªÅn
local function getRandomImageId()
    return BackgroundImages[math.random(1, #BackgroundImages)]
end

-- H√†m √°p d·ª•ng h√¨nh n·ªÅn
local function applyHubBackground(imageId, transparency)
    if gethui():FindFirstChild("Orion") then
        for _, gui in pairs(gethui():GetChildren()) do
            if gui.Name == "Orion" then
                local largestFrame = nil
                local maxSize = 0

                for _, frame in pairs(gui:GetDescendants()) do
                    if frame:IsA("Frame") and frame.BackgroundTransparency < 1 then
                        local frameSize = frame.AbsoluteSize.X * frame.AbsoluteSize.Y
                        if frameSize > maxSize then
                            maxSize = frameSize
                            largestFrame = frame
                        end
                    end
                end

                if largestFrame then
                    if largestFrame:FindFirstChild("HubBackground") then
                        largestFrame:FindFirstChild("HubBackground"):Destroy()
                    end

                    local background = Instance.new("ImageLabel")
                    background.Name = "HubBackground"
                    background.Parent = largestFrame
                    background.Size = UDim2.new(1, 0, 1, 0)
                    background.Position = UDim2.new(0, 0, 0, 0)
                    background.Image = "rbxassetid://" .. imageId
                    background.BackgroundTransparency = 1
                    background.ImageTransparency = transparency or 0.7
                    background.ScaleType = Enum.ScaleType.Stretch
                    background.ZIndex = 0
                end
            end
        end
    end
end

-- H√†m x√≥a h√¨nh n·ªÅn
local function resetBackground()
    if gethui():FindFirstChild("Orion") then
        for _, gui in pairs(gethui():GetChildren()) do
            if gui.Name == "Orion" then
                for _, frame in pairs(gui:GetDescendants()) do
                    if frame:IsA("Frame") and frame:FindFirstChild("HubBackground") then
                        frame:FindFirstChild("HubBackground"):Destroy()
                    end
                end
            end
        end
    end
end

-- H√†m √°p d·ª•ng ƒë·ªô trong su·ªët c·ªßa h√¨nh n·ªÅn
local function applyBackgroundTransparency(transparency)
    if gethui():FindFirstChild("Orion") then
        for _, gui in pairs(gethui():GetChildren()) do
            if gui.Name == "Orion" then
                for _, frame in pairs(gui:GetDescendants()) do
                    if frame:IsA("Frame") and frame:FindFirstChild("HubBackground") then
                        frame.HubBackground.ImageTransparency = transparency
                    end
                end
            end
        end
    end
end

-- T·∫£i m√†u ƒë√£ l∆∞u
savedHubColor = loadColor(hubColorFile, Color3.fromRGB(30, 30, 30))
savedTextAndBorderColor = loadColor(textAndBorderColorFile, Color3.fromRGB(255, 255, 255))

-- ========== T·∫†O WINDOW CH√çNH ==========
local Window = OrionLib:MakeWindow({
    Name = "System Control",
    HidePremium = false,
    SaveConfig = false,
    IntroEnabled = false
})

-- ========== TAB MAIN (CH·ª®C NƒÇNG CH√çNH) ==========
local MainTab = Window:MakeTab({
    Name = "Main",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

MainTab:AddToggle({
    Name = "Auto Summon",
    Default = false,
    Callback = function(Value)
        getgenv().AutoSummon = Value
    end
})

task.spawn(function()
    while true do
        if getgenv().AutoSummon then
            pcall(function()
                ReplicatedStorage.System.Summon:FireServer("Sukuna")
            end)
            task.wait(getgenv().NoDelay and 0 or DelayTime)
        else
            task.wait(0.2)
        end
    end
end)

MainTab:AddToggle({
    Name = "Auto Random",
    Default = false,
    Callback = function(Value)
        getgenv().AutoRandom = Value
    end
})

task.spawn(function()
    while true do
        if getgenv().AutoRandom then
            pcall(function()
                ReplicatedStorage.System.RandomItem:FireServer(5)
            end)
            task.wait(getgenv().NoDelay and 0 or DelayTime)
        else
            task.wait(0.2)
        end
    end
end)

MainTab:AddToggle({
    Name = "Auto Store",
    Default = false,
    Callback = function(Value)
        getgenv().AutoStore = Value
    end
})

task.spawn(function()
    while true do
        if getgenv().AutoStore then
            for _,tool in pairs(Player.Backpack:GetChildren()) do
                if tool:IsA("Tool") then
                    pcall(function()
                        ReplicatedStorage.System.Inv.Inventory:InvokeServer("Add", tool.Name)
                    end)
                end
            end
            task.wait(getgenv().NoDelay and 0 or 2)
        else
            task.wait(0.5)
        end
    end
end)

MainTab:AddToggle({
    Name = "No Delay",
    Default = false,
    Callback = function(Value)
        getgenv().NoDelay = Value
    end
})

-- ========== TAB GIAO DI·ªÜN (HUB) ==========
local HubTab = Window:MakeTab({
    Name = "Hub Settings",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

-- Bi·∫øn l∆∞u tr·∫°ng th√°i h√¨nh n·ªÅn
local backgroundEnabled = false
local currentTransparency = 0.7
local hubTransparency = 0.3

-- Toggle b·∫≠t/t·∫Øt h√¨nh n·ªÅn (Random t·ª´ 7 ·∫£nh)
HubTab:AddToggle({
    Name = "B·∫≠t/T·∫Øt H√¨nh N·ªÅn (Random)",
    Default = false,
    Callback = function(isOn)
        backgroundEnabled = isOn
        if isOn then
            applyHubBackground(getRandomImageId(), currentTransparency)
        else
            resetBackground()
        end
    end
})

-- Dropdown ch·ªçn ·∫£nh c·ª• th·ªÉ (ƒê√£ c·∫≠p nh·∫≠t ƒë·ªß 7 ·∫£nh)
HubTab:AddDropdown({
    Name = "Ch·ªçn ·∫¢nh N·ªÅn C·ª• Th·ªÉ",
    Options = {
        "79464702411655 - ·∫¢nh 1",
        "78188111267182 - ·∫¢nh 2",
        "87324819549778 - ·∫¢nh 3",
        "106183662263394 - ·∫¢nh 4 (M·ªõi)",
        "101124835052371 - ·∫¢nh 5 (M·ªõi)",
        "104282201865978 - ·∫¢nh 6 (M·ªõi)",
        "109827889408368 - ·∫¢nh 7 (M·ªõi)"
    },
    Default = "79464702411655 - ·∫¢nh 1",
    Callback = function(value)
        local selectedId = value:match("(%d+)")
        if selectedId then
            applyHubBackground(selectedId, currentTransparency)
            backgroundEnabled = true
        end
    end
})

-- Slider ƒëi·ªÅu ch·ªânh ƒë·ªô trong su·ªët c·ªßa Hub
HubTab:AddSlider({
    Name = "ƒê·ªô Trong Su·ªët Hub",
    Min = 0.0,
    Max = 0.98,
    Default = hubTransparency,
    Increment = 0.1,
    Callback = function(value)
        hubTransparency = value
        applyHubTransparency(value)
    end
})

-- Slider ƒëi·ªÅu ch·ªânh ƒë·ªô r√µ c·ªßa h√¨nh n·ªÅn
HubTab:AddSlider({
    Name = "ƒê·ªô R√µ H√¨nh N·ªÅn",
    Min = 0.1,
    Max = 0.98,
    Default = currentTransparency,
    Increment = 0.1,
    Callback = function(value)
        currentTransparency = value
        if backgroundEnabled then
            applyBackgroundTransparency(value)
        end
    end
})

-- Color Picker ƒë·ªïi m√†u Hub
HubTab:AddColorpicker({
    Name = "ƒê·ªïi M√†u Hub",
    Default = savedHubColor,
    Callback = function(Value)
        savedHubColor = Value
        saveColor(Value, hubColorFile)
        applyHubColor(savedHubColor)
    end
})

-- Color Picker ƒë·ªïi m√†u ch·ªØ
HubTab:AddColorpicker({
    Name = "ƒê·ªïi M√†u Ch·ªØ",
    Default = savedTextAndBorderColor,
    Callback = function(Value)
        savedTextAndBorderColor = Value
        saveColor(Value, textAndBorderColorFile)
        applyTextAndBorderColor(savedTextAndBorderColor)
    end
})

-- N√∫t l√†m m·ªõi giao di·ªán
HubTab:AddButton({
    Name = "L√†m M·ªõi Giao Di·ªán",
    Callback = function()
        applyHubColor(savedHubColor)
        applyTextAndBorderColor(savedTextAndBorderColor)
        applyHubTransparency(hubTransparency)
        if backgroundEnabled then
            applyHubBackground(getRandomImageId(), currentTransparency)
        end
    end
})

-- N√∫t x√≥a h√¨nh n·ªÅn
HubTab:AddButton({
    Name = "üóëÔ∏è X√≥a H√¨nh N·ªÅn",
    Callback = function()
        resetBackground()
        backgroundEnabled = false
    end
})

-- ========== √ÅP D·ª§NG M√ÄU KHI KH·ªûI ƒê·ªòNG ==========
task.wait(1) -- ƒê·ª£i OrionLib load xong
applyHubColor(savedHubColor)
applyTextAndBorderColor(savedTextAndBorderColor)
applyHubTransparency(hubTransparency)

-- ========== KH·ªûI T·∫†O ORIONLIB ==========
OrionLib:Init()
